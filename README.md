# Tu Vuelta al Sol - Agenda AstrolÃ³gica Personalizada

## Resumen de la AplicaciÃ³n

"Tu Vuelta al Sol" es una aplicaciÃ³n web que genera agendas astrolÃ³gicas personalizadas basadas en la carta natal y progresada del usuario. La aplicaciÃ³n permite a los usuarios:

1. Registrarse y autenticarse en el sistema
2. Introducir sus datos de nacimiento precisos (fecha, hora y lugar)
3. Generar su carta natal y progresada
4. Personalizar las preferencias de su agenda astrolÃ³gica
5. Previsualizar el contenido antes de la compra
6. Realizar el pago de su agenda personalizada
7. Acceder a una versiÃ³n digital interactiva de su agenda
8. Descargar una versiÃ³n PDF de alta calidad
9. Recibir interpretaciones detalladas de su carta y eventos astrolÃ³gicos relevantes

La agenda incluye secciones personalizadas como:
- Puntos fundamentales y configuraciÃ³n elemental
- PropÃ³sito de vida y perfil emocional
- AnÃ¡lisis de personalidad y patrones de pensamiento
- Estilo de amor y toma de decisiones
- AnÃ¡lisis de la carta progresada
- PrÃ¡cticas de sanaciÃ³n para traumas de vidas pasadas
- Calendario mensual detallado con eventos astrolÃ³gicos personalizados
- Rituales recomendados basados en la configuraciÃ³n astrolÃ³gica individual

## Flujo de Usuario

1. **Registro/Login**: El usuario se registra o inicia sesiÃ³n
2. **Dashboard**: Accede a su panel personal donde puede ver sus agendas o crear una nueva
3. **Formulario**: Completa el formulario con datos de nacimiento precisos
4. **Procesamiento**: El sistema calcula la carta natal y progresada
5. **PersonalizaciÃ³n**: El usuario selecciona preferencias para su agenda
6. **PrevisualizaciÃ³n**: Se muestra una vista previa limitada de la agenda
7. **Pago**: El usuario realiza el pago a travÃ©s de Stripe
8. **GeneraciÃ³n**: El sistema genera la agenda completa (digital y PDF)
9. **Acceso**: El usuario accede a su agenda desde su Ã¡rea privada

## Arquitectura TÃ©cnica

### Stack TecnolÃ³gico

#### Frontend
- **Framework**: Next.js 14
- **Lenguaje**: TypeScript
- **Estilos**: Tailwind CSS
- **Formularios**: React Hook Form + Zod
- **Cliente**: React 18

#### Backend
- **Servidor**: Next.js API Routes (App Router)
- **Base de Datos**: MongoDB con Mongoose
- **AutenticaciÃ³n**: Firebase Authentication
- **Almacenamiento**: Firebase Storage para PDFs y recursos estÃ¡ticos
- **Pagos**: Stripe
- **APIs AstrolÃ³gicas**: IntegraciÃ³n con servicios externos que usan Swiss Ephemeris

### Estructura del Proyecto
/
â”œâ”€â”€ public/                     # Recursos estÃ¡ticos
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # App Router de Next.js
â”‚   â”‚   â”œâ”€â”€ (auth)/             # Grupo de rutas de autenticaciÃ³n
â”‚   â”‚   â”‚   â”œâ”€â”€ login/          # PÃ¡gina de inicio de sesiÃ³n
â”‚   â”‚   â”‚   â”œâ”€â”€ register/       # PÃ¡gina de registro
â”‚   â”‚   â”‚   â””â”€â”€ forgot-password/ # PÃ¡gina de recuperaciÃ³n de contraseÃ±a
â”‚   â”‚   â”œâ”€â”€ (dashboard)/        # Grupo de rutas del panel
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/      # PÃ¡gina principal del dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ birth-data/     # PÃ¡gina de datos de nacimiento
â”‚   â”‚   â”‚   â””â”€â”€ agenda/         # PÃ¡gina de agenda y vista previa
â”‚   â”‚   â”œâ”€â”€ api/                # API routes de Next.js
â”‚   â”‚   â”œâ”€â”€ layout.tsx          # Layout principal
â”‚   â”‚   â””â”€â”€ page.tsx            # PÃ¡gina principal (Home)
â”‚   â”œâ”€â”€ components/             # Componentes React reutilizables
â”‚   â”‚   â”œâ”€â”€ auth/               # Componentes de autenticaciÃ³n
â”‚   â”‚   â”œâ”€â”€ dashboard/          # Componentes del panel de usuario
â”‚   â”‚   â”œâ”€â”€ layout/             # Componentes de layout
â”‚   â”‚   â”œâ”€â”€ astrology/          # Componentes especÃ­ficos de astrologÃ­a
â”‚   â”‚   â””â”€â”€ ui/                 # Componentes de UI bÃ¡sicos
â”‚   â”œâ”€â”€ context/                # Proveedores de contexto (Auth, etc.)
â”‚   â”œâ”€â”€ lib/                    # Utilidades y funciones auxiliares
â”‚   â”‚   â”œâ”€â”€ firebase.ts         # ConfiguraciÃ³n de Firebase
â”‚   â”‚   â”œâ”€â”€ db.ts               # ConexiÃ³n con MongoDB
â”‚   â”‚   â”œâ”€â”€ analytics.ts        # Funciones de analÃ­tica
â”‚   â”‚   â””â”€â”€ utils/              # Utilidades generales
â”‚   â””â”€â”€ models/                 # Modelos de datos de MongoDB
â”‚       â”œâ”€â”€ User.ts             # Modelo de usuario
â”‚       â”œâ”€â”€ BirthData.ts        # Modelo de datos de nacimiento
â”‚       â”œâ”€â”€ Chart.ts            # Modelo de carta astral
â”‚       â”œâ”€â”€ Agenda.ts           # Modelo de agenda
â”‚       â”œâ”€â”€ Payment.ts          # Modelo de pagos
â”‚       â””â”€â”€ Analytics.ts        # Modelo de eventos de analÃ­tica
â”œâ”€â”€ .env.local                  # Variables de entorno locales
â”œâ”€â”€ next.config.js              # ConfiguraciÃ³n de Next.js
â”œâ”€â”€ tailwind.config.ts          # ConfiguraciÃ³n de Tailwind CSS
â”œâ”€â”€ tsconfig.json               # ConfiguraciÃ³n de TypeScript
â””â”€â”€ package.json                # Dependencias y scripts

## Modelos de Datos

### Usuario
```typescript
{
  _id: ObjectId,
  email: string,
  password: string, // Hasheado
  fullName: string,
  createdAt: Date,
  lastLogin: Date,
  role: "user" | "admin",
  isVerified: boolean,
  subscriptionStatus: "free" | "premium" | "none"
}
## Modelos de Datos

### Usuario
```typescript
{
  _id: ObjectId,
  email: string,
  password: string, // Hasheado
  fullName: string,
  createdAt: Date,
  lastLogin: Date,
  role: "user" | "admin",
  isVerified: boolean,
  subscriptionStatus: "free" | "premium" | "none"
}
```

### Carta Astral
```typescript

{
  _id: ObjectId,
  userId: ObjectId,
  birthDataId: ObjectId,
  natalChart: object, // JSON con la carta natal
  progressedCharts: array, // Array de cartas progresadas con fechas
  createdAt: Date,
  lastUpdated: Date
}```


### Agenda
```typescript

{
  _id: ObjectId,
  userId: ObjectId,
  chartId: ObjectId,
  startDate: Date,
  endDate: Date,
  content: object, // JSON con el contenido de la agenda
  pdfUrl: string,
  createdAt: Date,
  status: "draft" | "published"
}```


### Pagos
```typescript

{
  _id: ObjectId,
  userId: ObjectId,
  agendaId: ObjectId,
  amount: number,
  currency: string,
  paymentMethod: string,
  status: "pending" | "completed" | "failed",
  transactionId: string,
  createdAt: Date
}```typescript

### AnalÃ­tica de Usuario
```
{
  _id: ObjectId,
  userId: ObjectId,
  sessionId: string,
  event: string,  // "signup", "chart_created", "preview_viewed", "purchase", etc.
  page: string,
  referrer: string,
  timestamp: Date,
  metadata: object // Datos adicionales especÃ­ficos del evento
}

```

## IntegraciÃ³n de APIs AstrolÃ³gicas

La aplicaciÃ³n se conectarÃ¡ a servicios astrolÃ³gicos que utilizan Swiss Ephemeris para cÃ¡lculos precisos, obteniendo:
- Posiciones planetarias y aspectos
- Casas astrolÃ³gicas
- Aspectos entre planetas
- Cartas progresadas
- TrÃ¡nsitos importantes
- Fases lunares y eclipses

## Seguridad y ProtecciÃ³n de Datos

- AutenticaciÃ³n segura con Firebase Authentication
- EncriptaciÃ³n de datos sensibles
- Conformidad con GDPR para datos personales
- Conexiones seguras HTTPS
- ProtecciÃ³n de rutas API con rate limiting
  ### Sistema de registro completo que utiliza:
- Firebase Authentication para el registro de usuarios
- MongoDB para almacenar datos adicionales del usuario
- React Hook Form y Zod para validaciÃ³n de formularios
- Next.js App Router para la navegaciÃ³n.

## MonetizaciÃ³n

- Compra Ãºnica de agenda personalizada
- Posibilidad de suscripciÃ³n para actualizaciones mensuales
- Diferentes niveles de detalle (bÃ¡sico, estÃ¡ndar, premium)

## AnalÃ­tica y MÃ©tricas de Ã‰xito

### Herramientas de AnÃ¡lisis
- **Vercel Analytics**: AnÃ¡lisis integrado con el despliegue para mÃ©tricas bÃ¡sicas
- **Google Analytics 4**: Seguimiento detallado de comportamiento y conversiones
- **Mixpanel**: Para anÃ¡lisis de embudo y seguimiento de eventos detallados
- **Hotjar**: Mapas de calor y grabaciones de sesiones para entender el comportamiento del usuario

### KPIs (Indicadores Clave de Rendimiento)
1. **AdquisiciÃ³n de Usuarios**
   - Tasa de conversiÃ³n de visitantes a registros
   - Costo de adquisiciÃ³n de cliente (CAC)
   - Fuentes de trÃ¡fico mÃ¡s efectivas

2. **Engagement**
   - Tiempo de permanencia en la aplicaciÃ³n
   - Frecuencia de visitas
   - Tasa de retenciÃ³n (semanal/mensual)
   - NÃºmero de cartas astrales generadas por usuario

3. **ConversiÃ³n**
   - Tasa de conversiÃ³n de registro a compra
   - Valor promedio del pedido
   - Tasa de abandono en el proceso de compra
   - Tiempo entre registro y primera compra

4. **RetenciÃ³n y SatisfacciÃ³n**
   - Tasa de retenciÃ³n despuÃ©s de la compra
   - Net Promoter Score (NPS)
   - Valoraciones y comentarios de usuarios
   - Tasa de usuarios que compran agendas adicionales

5. **TÃ©cnicos y Rendimiento**
   - Tiempo de carga de la pÃ¡gina
   - Tasa de errores
   - Dispositivos y navegadores utilizados
   - PuntuaciÃ³n Core Web Vitals

### ImplementaciÃ³n de Seguimiento

```javascript
// Ejemplo de seguimiento de eventos con Google Analytics 4
export const trackEvent = (eventName, params = {}) => {
  if (typeof window !== 'undefined' && window.gtag) {
    window.gtag('event', eventName, params);
  }
  
  // TambiÃ©n enviar a nuestra base de datos para anÃ¡lisis propios
  fetch('/api/analytics/event', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ event: eventName, ...params, timestamp: new Date() })
  });
};
```
## Estado de desarrollo

### Completado
- âœ… ConfiguraciÃ³n inicial de Next.js con TypeScript y Tailwind CSS
- âœ… EstructuraciÃ³n del proyecto
- âœ… ConfiguraciÃ³n de estilos con Tailwind CSS

### En progreso
- ğŸ”„ ImplementaciÃ³n de autenticaciÃ³n con Firebase
- ğŸ”„ CreaciÃ³n de componentes de UI bÃ¡sicos
- ğŸ”„ CreaciÃ³n de formularios de autenticaciÃ³n

### Pendiente
- â¬œ ConfiguraciÃ³n de MongoDB y modelos de datos
- â¬œ ImplementaciÃ³n de pÃ¡gina de datos de nacimiento
- â¬œ IntegraciÃ³n con APIs astrolÃ³gicas
- â¬œ ImplementaciÃ³n de pÃ¡gina de dashboard
- â¬œ VisualizaciÃ³n de carta natal
- â¬œ GeneraciÃ³n de contenido personalizado
- â¬œ IntegraciÃ³n de pasarela de pagos
- â¬œ GeneraciÃ³n y descarga de PDF
- â¬œ ImplementaciÃ³n de analÃ­tica
- â¬œ Despliegue a producciÃ³n


## Estado de desarrollo

### Completado
- âœ… ConfiguraciÃ³n inicial de Next.js con TypeScript y Tailwind CSS
- âœ… EstructuraciÃ³n del proyecto
- âœ… ConfiguraciÃ³n de estilos con Tailwind CSS
- âœ…  ImplementaciÃ³n de autenticaciÃ³n con Firebase

### En progreso

- ğŸ”„ CreaciÃ³n de componentes de UI bÃ¡sicos
- ğŸ”„ CreaciÃ³n de formularios de autenticaciÃ³n

### Pendiente
- â¬œ ConfiguraciÃ³n de MongoDB y modelos de datos
- â¬œ ImplementaciÃ³n de pÃ¡gina de datos de nacimiento
- â¬œ IntegraciÃ³n con APIs astrolÃ³gicas
- â¬œ ImplementaciÃ³n de pÃ¡gina de dashboard
- â¬œ VisualizaciÃ³n de carta natal
- â¬œ GeneraciÃ³n de contenido personalizado
- â¬œ IntegraciÃ³n de pasarela de pagos
- â¬œ GeneraciÃ³n y descarga de PDF
- â¬œ ImplementaciÃ³n de analÃ­tica
- â¬œ Despliegue a producciÃ³n


## Instrucciones de instalaciÃ³n

1. Clonar el repositorio
```bash
git clone https://github.com/tu-usuario/tu-vuelta-al-sol.git
cd tu-vuelta-al-sol
```
2. Instalar dependencias
```bash
npm install
```
3. Configurar variables de entorno
Crea un archivo .env.local en la raÃ­z del proyecto con las siguientes variables:
```bash

```bash
NEXT_PUBLIC_FIREBASE_API_KEY=
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=
NEXT_PUBLIC_FIREBASE_PROJECT_ID=
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=
NEXT_PUBLIC_FIREBASE_APP_ID=
MONGODB_URI=
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
NEXT_PUBLIC_GA_MEASUREMENT_ID=

```
4. Iniciar el servidor de desarrollo
```bash
npm run dev
```
5. Acceder a la aplicaciÃ³n en http://localhost:3000

## ConfiguraciÃ³n de GitHub (Repositorio Privado)

1. Inicializar el repositorio local
```bash
Copiar git init
```

2. Crear archivo .gitignore

```bash
Copiar 
# dependencies
/node_modules
/.pnp
.pnp.js

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# local env files
.env*.local

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts
```
3. Agregar el archivo .gitignore a la raÃ­z del proyecto
AÃ±adir archivos y hacer commit inicial

```bash
Copiargit add .
git commit -m "ConfiguraciÃ³n inicial del proyecto"
```

4. Crear un nuevo repositorio privado en GitHub

Ir a https://github.com/new
- Nombrar el repositorio "tu-vuelta-al-sol"
- Seleccionar "Private"
-Crear repositorio sin README, .gitignore o licencia


Conectar y subir el repositorio local

```bash
Copiar git remote add origin git remote add origin https://github.com/tu-usuario/tu-vuelta-al-sol.git
git branch -M main
git push -u origin main
```
## Licencia
Todos los derechos reservados. Este proyecto y su contenido es propiedad exclusiva de Wunjo Creations.
## Contacto
Para mÃ¡s informaciÃ³n, contactar a wunjocreations@gmail.com# tu-vuelta-al-sol
